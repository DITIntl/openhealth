<?xml version="1.0"?>
<openerp>
	<data>



		<record model="ir.ui.view" id="view_appointment">
			<field name="name">oeh.medical.appointment.form</field>
			<field name="model">oeh.medical.appointment</field>

			<field name="inherit_id" ref="oehealth.oeh_medical_appointment_view"/>			

	        <field name="mode">primary</field>

	        <field name="priority" eval="1"/>
			<field name="arch" type="xml">





				<!-- Remove -->
				<xpath expr="//field[@name='name']" position="after">

					<div class="oe_right">
							<button 
								type="object" 
								class="oe_highlight"
								string="Eliminar" 

								name="remove_appointment" 
							/>
					</div>

				</xpath>





				<xpath expr="//field[@name='patient']" position="replace">					
					<field name="patient"/>					
					<field name="vspace"/>
				</xpath>






				<xpath expr="//field[@name='institution']" position="replace">
					<field name="x_duration_min"	attrs="{	'readonly':[('x_type', '!=', 'session')], 
																'invisible':[('x_type', '!=', 'session')]	}"/>
				</xpath>





				<xpath expr="//field[@name='doctor']" position="replace">					
					
					<field name="vspace"	attrs="{'invisible':[('x_machine', '!=', False),]}"/>

					<field name="doctor"	attrs="{'invisible':[('x_machine', '!=', False),]}"/>				
					
					<field name="x_machine"	/>
					
					<field name="vspace"/>
					
					<field name="vspace"/>
				
				</xpath>








				<xpath expr="//field[@name='appointment_date']" position="replace">					
				<!--
				-->
					<field name="appointment_date"		attrs="{'invisible':[
																				('state', '=', 'pre_scheduled_control'),
																			]}"/>

					<field name="x_date"				attrs="{'invisible':[
																				('state', '!=', 'pre_scheduled_control'),
																			]}"/>
				</xpath>






				<xpath expr="//field[@name='patient_status']" position="replace">
					<!--
					<field name="appointment_end"	readonly="1"/>
					<field name="patient_status"	/>
					-->

					<field name="appointment_end"	/>
				</xpath>





				<xpath expr="//field[@name='duration']" position="replace">
					<field name="duration"/>				
				</xpath>




				<!--
				<xpath expr="//field[@name='patient_status']" position="replace">
				</xpath>
				-->

				<xpath expr="//field[@name='urgency_level']" position="replace">
				</xpath>


				<!--
				<xpath expr="//field[@name='description']" position="after">

				<xpath expr="//field[@name='patient_status']" position="after">
				-->

				<xpath expr="//notebook" position="before">
				<!--
				<field name="patient_status" position="after">
				-->

					<group col="2">

					<!--
					-->

						<group >

							<!--
							<field name="evaluation_ids"/>
							<field name="x_date"/>
							<field name="x_error"/>
							<field name="state"		readonly="0"/>
							<field name="x_type_cal"/>
							-->

							<field name="x_type"/>


							<field name="vspace"/>


							<field name="state"/>

							<field name="vspace"/>




							<field name="treatment"		attrs="{'invisible':[('x_type', '!=', 'consultation')]}"/>

							<!--
							<field name="consultation"	attrs="{'invisible':[('x_type', '!=', 'consultation')]}"/>

							<field name="procedure"   	attrs="{'invisible':[('x_type', '!=', 'procedure')]}"/>

							<field name="session"		attrs="{'invisible':[('x_type', '!=', 'session')]}"/>

							<field name="control"		attrs="{'invisible':[('x_type', '!=', 'control')]}"/>
							-->

						</group>




						<group>
							<!--
							<calendar string="Calendar"  	date_start="appointment_date" date_delay="duration"  display="[patient]"   
															color="color_doctor_id"   quick_add="False" mode="day">
				            	<field name="patient"/>       
        					</calendar>
							-->


							<field name="x_create_procedure_automatic"	attrs="{'invisible':[('x_type', '!=', 'consultation')]}"  />

							<field name="vspace"/>							
							<field name="vspace"/>
							<!--
							<field name="x_chief_complaint"				attrs="{'invisible':[('x_type', '!=', 'consultation')]}"/>
							-->


							<!--
							<group>
								<button 
									type="object" 
									class="oe_highlight"
									string="Buscar Tratamiento" 
									attrs="{'invisible':[('x_type', '!=', 'consultation')]}"

									name="search_treatment" 
								/>
							</group>

							<group>
								<button 
									type="object" 
									class="oe_highlight"
									string="Crear Tratamiento" 
									attrs="{'invisible':[('x_type', '!=', 'consultation')]}"
									name="create_treatment" 
								/>
							</group>
							-->
						</group>
					</group>




					<group col="2">

						<group >
						</group>

						<group >
						</group>



					</group>

				<!--
				</field>
				-->
				</xpath>



			</field>
		</record>






		<!-- service tree/list view -->
		<record model="ir.ui.view" id="oehealth.oeh_medical_appointment_tree">
			<field name="name">oeh.medical.appointment.tree</field>
			<field name="model">oeh.medical.appointment</field>
			<field name="type">tree</field>
			<field name="priority" eval="1"/>

			<field name="arch" type="xml">
				


				<!--
				<tree string="Appointment Tree">
				<tree string="Appointment Tree"  	default_order='x_time'>


					
				<tree string="Appointment Tree"  	default_order='appointment_date'>
				-->
				<tree string="Appointment Tree"  	default_order='x_date, x_time'>
				


					<!--
					<field name="name"/>
					-->


					<!--
					-->
					<field name="patient"/>





					<field name="doctor"/>

					<field name="x_type"/>


					<field name="x_machine"/>



					<!--
					<field name="x_duration_min"/>
					<field name="x_chief_complaint"/>
					-->



					<field name="treatment"/>

					<!--

					<field name="consultation"		attrs="{'invisible':[('x_type', '!=', 'consultation')]}"/>
					<field name="procedure"			attrs="{'invisible':[('x_type', '!=', 'procedure')]}"/>
					<field name="session"			/>
					<field name="control"			/>	

					-->
					<field name="consultation"/>
					<field name="procedure"/>
					<field name="session"/>
					<field name="control"/>					


					


					<!--
					<field name="appointment_end"/>
					<field name="duration"/>


					<field name="appointment_date"/>


					-->
					
					<field name="state"/>

					<field name="x_date"/>

					<!--
					<field name="x_time"	attrs="{'invisible':[('state', '=', 'pre_scheduled_control')]}" />
					-->
					<field name="x_time"/>

					
					<!--
					<field name="appointment_end"/>
					<field name="evaluation_ids"/>
					-->

				</tree>
			</field>
		</record>







		<!-- Window action -->
		<record model="ir.actions.act_window" id="oeh_medical_appointment_list_action">
			<field name="name">Citas</field>
			<field name="res_model">oeh.medical.appointment</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>

			<!--
            
            <field name="domain">[
									('type', '=', 'service'),
									('x_treatment', '=', 'laser_co2'),
            					]</field>


			<field name="context">{
									'order': 'x_name_short'
									}	

		
			</field>
			-->
		</record>


		<!-- Menu -->
		<menuitem id="oeh_medical_appointment_menu" name="Citas"
			parent="openhealth_menu"
			action="oeh_medical_appointment_list_action"/>









		<!-- Window action -->
		<!--
		<record model="ir.actions.act_window" id="oeh_medical_preappointment_list_action">
			<field name="name">Pre-citas</field>
			<field name="res_model">oeh.medical.appointment</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>

		</record>
		-->
		<!-- Menu -->
		<!--
		<menuitem id="oeh_medical_preappointment_menu" name="Pre-citas"
			parent="openhealth_menu"
			action="oeh_medical_preappointment_list_action"/>
		-->








		<!-- Confirmed -->  
		<record id="oeh_medical_appointment_action_tree_1" model="ir.actions.act_window">
                    <field name="name">Citas confirmadas</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
                    <field name="view_mode">calendar,tree,form</field>
                    
                    <field name="domain">[

                    						('state', 'in', ['pre_scheduled','Scheduled', 'Completed', 'Invoiced']),

                    						('x_machine', '=', 'False'),

                    					]
                    </field>
                    
                    <field name="context">{}</field>
                    <field name="view_id" eval="False"/>
                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
		</record>

		<menuitem 
					action="oeh_medical_appointment_action_tree_1" 
					parent="oehealth.oeh_medical_appointment_menu"  
					id="oeh_medical_appointment_list_1" 
					sequence="2"
		/>






		<!-- Pre Controls -->
		<record id="oeh_medical_appointment_action_tree_2" model="ir.actions.act_window">

                    <field name="name">Pre-citas / Controles</field>
            
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
                    <field name="view_mode">calendar,tree,form</field>
                    
                    <field name="domain">[

                    						('state', '=', 'pre_scheduled_control'),

                    					]
                    </field>
                    
                    <field name="context">{}</field>
                    <field name="view_id" eval="False"/>
                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
		</record>

		<menuitem 
					action="oeh_medical_appointment_action_tree_2" 
					parent="oehealth.oeh_medical_appointment_menu"  
					id="oeh_medical_appointment_list_2" 
					sequence="2"
		/>






		<!-- Machines -->
		<record id="oeh_medical_appointment_action_tree_3" model="ir.actions.act_window">

                    <field name="name">Máquinas</field>
            
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
                    <field name="view_mode">calendar,tree,form</field>
                    
                    <!--

                    						('x_machine', 'in', ['laser_co2_1', 'laser_co2_2', 'laser_co2_3', 'laser_excilite', 'laser_m22']),
                    -->
                    <field name="domain">[


                    						('x_machine', '!=', 'False'),

                    					]
                    </field>
                    
                    <field name="context">{

											'default_x_machine': 'laser_co2_1',

											'default_x_type': 'procedure',
                    	}
                    </field>


                    <field name="view_id" eval="False"/>
                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
		</record>

		<menuitem 
					action="oeh_medical_appointment_action_tree_3" 
					parent="oehealth.oeh_medical_appointment_menu"  
					id="oeh_medical_appointment_list_3"
					sequence="2"
		/>



	</data>
</openerp>
