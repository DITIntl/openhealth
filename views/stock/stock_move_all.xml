<?xml version="1.0"?>
<openerp>
	<data>



		<!-- By Product --> 
		<record id="filter_stock_move_all_by_product" model="ir.filters">
			<field name="name">Por Producto</field>
			<field name="model_id">stock.move.all</field>

			<field name="context">{'group_by': ['product_id']}</field>
			
			<field name="active" eval="True" />
			<field name="is_default" eval="True" />

<!--			
			<field name="user_id" eval="ref('base.user_root')" />
-->

		</record>






        <record id="stock_move_all_search" model="ir.ui.view">

            <field name="name">stock.move.all.search</field>
            
            <field name="model">stock.move.all</field>
            
            <field eval="3" name="priority"/>
            
            <field name="arch" type="xml">
                <search string="Stock move.alls">

                    <group expand="0" string="Group By">
                        <filter string="Product" name="by_product" domain="[]"  context="{'group_by':'product_id'}"/>
                    </group>
                </search>
            </field>
        </record>














		<!-- FORM --> 
		<record id="stock_move_all_form" model="ir.ui.view">
			<field name="name">stock.move.all</field>
			<field name="model">stock.move.all</field>
			<field name="arch" type="xml">

				<form string="Stock Move all Form">


					<header>


						<button 
								type="object" 
								class="oe_highlight"
								name="create_kardex"
								
								string="Actualizar"
						/>


<!--
-->						
						<button 
								type="object" 
								class="oe_highlight"
								name="reset"
								
								string="Clear"
						/>
					</header>



					<sheet>



						<group>
							<group>
								<field name="name"		/>
							</group>

							<group>
								<field name="product_id"		/>
							</group>
						</group>



<!--
						<group>
									<field name="stock_moves"		/>
						</group>
-->


						<group     >




						</group>



						<notebook>
	
							<page string="Movimientos">



									<field name="stock_move_min_ids"	context="{'group_by':'product_id'}"  	>

										<tree 	default_order="product_id"	 >	
								
											<field name="product_id"/>
<!--
											<field name="name"/>
-->
											<field name="picking"/>

											<field name="qty"/>

											<field name="source"/>

											<field name="destination"/>

											<field name="date"/>

										</tree>
									</field>



							</page>


						</notebook>
					</sheet>


				</form>
			</field>
		</record>






















		<!-- Kardex default view - Cremas -->
<!--
		<record id="stock_move_all_default_view" model="stock.move.all">

			<field name="name">This</field>

		</record>
-->

		<record id="stock_move_all_default_view" model="stock.move.all">


<!--
			<button 
						type="object" 
						class="oe_highlight"
						name="create_kardex"								
						

						string="Acutalizar"

						groups="openhealth.roots,openhealth.almacen_managers"
				/>
-->


		</record>






		<!-- TREE -->
		<record model="ir.ui.view" id="stock_move_min_tree">

			<field name="name">stock.move.min.tree</field>
			
			<field name="model">stock.move.min</field>
			
			<field name="arch" type="xml">

			<!--	
			<field name="priority" eval="1"/>
			-->

				<tree string="stock move min Tree">


					<field name="product_id"/>

					<field name="name"/>

					<field name="picking"/>

					<field name="qty"/>

					<field name="source"/>

					<field name="destination"/>

					<field name="date"/>
				</tree>
			</field>
		</record>






<!-- ACTION --> 
<!-- Stock Move Min --> 
		<record id="stock_move_min_list_action" model="ir.actions.act_window">
			<field name="name">Stock Move Min</field>
			<field name="res_model">stock.move.min</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>



<!--			
			<field name="type">ir.actions.act_window</field>

			<field name="view_id" ref="stock.view_move_tree"/>
			
			<field name="search_view_id" ref="stock.view_move_search"/>



			<field name="domain">[
									('state', '=', 'done'),				
									('location_id', 'not like', 'Cremas Despacho'),
				]</field>
			<field name="context">{}</field>
			<field name="context">{
									'group_by': ['product_id'], 
				}</field>
-->		


			<field name="domain">[]</field>

			<field name="context">{
									'group_by': ['product_id'], 
				}</field>

		</record>










<!-- ACTION -->
<!-- Stock Move All --> 	
		<record id="stock_move_all_form_action" model="ir.actions.act_window">

			<field name="name">Stock Move - All - jx</field>

			<field name="res_model">stock.move.all</field>
			
			<field name="type">ir.actions.act_window</field>

			<field name="view_mode">form,tree,kanban</field>

			<field name="domain">[]</field>

			<field name="context">{}</field>


			<field name="target">current</field>

<!--
			<field name="res_id" ref="stock_move_all_default_view"/>	
			<field name="target">inline</field>




			<field name="view_type">form</field>
			<field name="view_id" ref="stock_move_selector_default_view"/>
			<field name="domain">[]</field>
			<field name="context">{}</field>
			<field name="context">{'res_id': 7}</field>
			<field name="res_id">7</field>
-->
		</record>














	</data>
</openerp>
				